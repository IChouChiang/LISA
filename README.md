**English** | [简体中文](./README_zh.md)

# L.I.S.A. - Long Interval Sitting Alert

L.I.S.A. is an intelligent posture monitoring system designed to prevent long-term sitting health issues. It uses computer vision to track user presence and an AI-powered backend to provide varied, human-like reminders to take a break.

## Project Structure & Logic

The system is divided into three core modules:

### Module A: The Eye (Frontend & Vision)
*   **Technology:** HTML5, JavaScript, Google MediaPipe Pose.
*   **Functionality:**
    *   Captures video from the webcam locally in the browser (privacy-first).
    *   Detects human pose landmarks to confirm if a user is present.
    *   **Privacy Mode:** By default, the video feed is hidden and replaced with a "Tech Grid" visualization of the skeleton, ensuring users don't have to stare at themselves.
    *   **UI Controls:** Offers Dark/Light/System theme syncing, Timer Pause/Resume, and Time Limit selection (10s to 1 Hour).

### Module B: The Brain (Timer & State Logic)
*   **Logic:**
    *   **Presence Detection:** The timer only increments when a user is detected in the frame.
    *   **Auto-Pause:** If the user leaves, the timer pauses automatically.
    *   **Auto-Reset:** If the user leaves *after* an alert has been triggered (implying they took a break), the timer automatically resets to 0 when they return.
    *   **Alert System:**
        *   **Visual:** The status text turns red.
        *   **Notification:** A system notification fires every 10 seconds after the limit is reached.
        *   **Audio:** The browser speaks a message generated by the AI every 60 seconds.

### Module C: The Voice (Backend & AI)
*   **Technology:** Go (Golang), DeepSeek API.
*   **Port:** Runs on `localhost:8081`.
*   **Functionality:**
    *   Acts as a bridge between the Frontend and the LLM.
    *   Receives `POST` requests from the frontend when the sitting limit is reached.
    *   Calls the **DeepSeek API** to generate a short, creative, and non-repetitive health warning (e.g., "Your back will thank you for a stretch!").
    *   Returns the text to the frontend, where `window.speechSynthesis` vocalizes it.

## Developer Quick Start

To get the project running immediately for development:

### 1. Prerequisites
*   **Go (Golang):** Installed and added to PATH.
*   **Python 3.x:** (Optional) For resource monitoring.
*   **Web Browser:** Chrome, Edge, or Firefox.

### 2. One-Click Launch
Simply run the provided batch script in the root folder:
```cmd
start_dev.bat
```
This script has been enhanced to:
1.  **Auto-configure Proxy:** Sets `GOPROXY` to speed up downloads.
2.  **Show Progress:** Displays real-time compilation status.
3.  **System Tray Mode:** Builds and launches the backend as a background app (look for the icon in your taskbar).
4.  **Launch Frontend:** Opens the interface in your default browser.

### 3. Manual Launch
If you prefer to run things manually:

**Backend:**
```bash
cd backend
# Build without console window
go build -ldflags -H=windowsgui -o lisa-backend.exe main.go
# Run it
./lisa-backend.exe
```
*To stop the server, right-click the L.I.S.A. icon in the system tray and select "Quit".*

**Frontend:**
*   Open `posture-demo/index.html` in your browser.

## Configuration (API Key)

The backend requires a DeepSeek API key to generate AI responses.

1.  Open `backend/main.go`.
2.  Locate the `API_KEY` constant at the top of the file:
    ```go
    const API_KEY = "your-key-here"
    ```
3.  Replace it with your valid DeepSeek API key.

## Privacy Note
All video processing happens **locally** on your device via MediaPipe. No video data is ever sent to the backend or the cloud. Only a text signal ("User sat for X seconds") is sent to the backend to trigger the AI response.

## Performance & Resource Usage

Since L.I.S.A. runs computer vision locally in your browser, it does have some hardware requirements:

*   **GPU Usage:** Moderate to High. MediaPipe uses WebGL to accelerate pose detection. You might notice your GPU usage increase (e.g., 20-40% on integrated graphics) while the tab is active.
*   **CPU Usage:** Low to Moderate. Most of the heavy lifting is offloaded to the GPU, but the browser still manages the video stream.
*   **Battery:** If running on a laptop, this will consume battery faster than normal browsing due to the active camera and continuous AI processing.
*   **Backend:** The Go server is extremely lightweight and consumes negligible CPU/RAM (< 20MB RAM).

**Tip:** If you are on a low-power device, you can pause the timer or close the tab when not in use to save energy.

## Resource Monitoring

You can monitor the resource usage of the backend using the provided Python script.

1.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
2.  **Run the monitor:**
    ```bash
    python monitor_resources.py
    ```
    *Note: Ensure the backend is running first.*
